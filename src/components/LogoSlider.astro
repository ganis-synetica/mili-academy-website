---
// Logo slider with infinite scroll effect
interface Props {
  title?: string;
  direction?: 'forward' | 'reverse';
}

const { title, direction = 'forward' } = Astro.props;

// Client logos from Superpath
const logos = [
  { name: "SIAA", src: "/images/logos/siaa-1.webp" },
  { name: "Keystone Engineering", src: "/images/logos/keystone-1.webp" },
  { name: "SkinKandy", src: "/images/logos/skinkandy-1.webp" },
  { name: "Siemens", src: "/images/logos/siemens-2.webp" },
  { name: "Funraisin", src: "/images/logos/funraisin-1.webp" },
  { name: "Energy Queensland", src: "/images/logos/energy-qld-1.webp" },
  { name: "Veridapt", src: "/images/logos/veridapt-1.svg" },
  { name: "Carbon", src: "/images/logos/carbon-1.webp" },
  { name: "Keypath", src: "/images/logos/keypath-1.webp" },
  { name: "Francom", src: "/images/logos/francom.png" },
  { name: "GBST", src: "/images/logos/gbst.png" },
  { name: "Cotton Seed Distributors", src: "/images/logos/CSD.webp" },
  { name: "NAWIC", src: "/images/logos/nawic.png" },
  { name: "Heartland Bank", src: "/images/logos/heartland.png" },
  { name: "Who Gives A Crap", src: "/images/logos/wgac.png" },
  { name: "Richard Crookes Construction", src: "/images/logos/rcc.png" },
  { name: "Live Life Alarms", src: "/images/logos/livelife.png" },
  { name: "Roof Racks Galore", src: "/images/logos/roofracks.png" },
  { name: "Pantry", src: "/images/logos/pantry.webp" },
  { name: "Altus Traffic", src: "/images/logos/altus.png" },
  { name: "Advocacy Law Alliance", src: "/images/logos/advocacy.png" },
];
---

<div class="logo-slider-container">
  {title && <p class="slider-title">{title}</p>}
  
  <div class="slider-wrapper">
    <div class="gradient-left"></div>
    <div class={`slider-track ${direction === 'reverse' ? 'slider-track-reverse' : 'slider-track-forward'}`}>
      {/* Duplicate logos for seamless loop */}
      {[...logos, ...logos].map((logo) => (
        <div class="logo-item">
          <img src={logo.src} alt={logo.name} loading="lazy" />
        </div>
      ))}
    </div>
    <div class="gradient-right"></div>
  </div>
</div>

<style>
  .logo-slider-container {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  
  .slider-title {
    margin: 0 0 1rem;
    font-family: 'Plus Jakarta Sans', sans-serif;
    font-size: 1.125rem;
    font-weight: 300;
    line-height: 1.568;
    color: #000;
    text-align: center;
  }
  
  .slider-wrapper {
    position: relative;
    width: 100%;
    overflow: hidden;
  }
  
  .slider-track {
    display: flex;
    gap: 60px;
    align-items: center;
    will-change: transform;
  }
  
  .slider-track-forward {
    animation: scrollForward 40s linear infinite;
  }
  
  .slider-track-reverse {
    animation: scrollReverse 40s linear infinite;
  }
  
  @keyframes scrollForward {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }
  
  @keyframes scrollReverse {
    0% {
      transform: translateX(-50%);
    }
    100% {
      transform: translateX(0);
    }
  }
  
  .slider-track:hover {
    animation-play-state: paused;
  }
  
  .logo-item {
    flex-shrink: 0;
    height: 76px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .logo-item img {
    max-height: 45px;
    max-width: 140px;
    width: auto;
    height: auto;
    object-fit: contain;
    filter: grayscale(100%) opacity(0.5);
    transition: filter 0.3s ease;
  }
  
  .logo-item:hover img {
    filter: grayscale(0%) opacity(1);
  }
  
  .gradient-left,
  .gradient-right {
    position: absolute;
    top: 0;
    bottom: 0;
    width: clamp(50px, 10vw, 100px);
    pointer-events: none;
    z-index: 2;
  }
  
  .gradient-left {
    left: 0;
    background: linear-gradient(to right, #fff, transparent);
  }
  
  .gradient-right {
    right: 0;
    background: linear-gradient(to left, #fff, transparent);
  }
  
  @media (max-width: 768px) {
    .logo-item {
      height: 60px;
    }
    
    .logo-item img {
      max-height: 35px;
      max-width: 100px;
    }
    
    .slider-track {
      gap: 40px;
    }
    
    .slider-track-forward,
    .slider-track-reverse {
      animation-duration: 30s;
    }
  }
</style>
